---
title: "Projects"
listing:
    id: posts
    contents: posts
    sort: "date desc"
    template: _extensions/custom-listing/gallery.ejs
    categories: true
    sort-ui: false
    filter-ui: false
    fields: [title, date, categories, image, description, author, subtitle]
    max-description-length: 300
page-layout: full
title-block-banner: false
---

::: {#timeline .timeline-container}
:::

```{=html}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const timeline = document.querySelector('.timeline-container');
  if (!timeline) return;
  
  // Get all gallery cards
  const cards = document.querySelectorAll('.gallery-card[data-date]');
  if (!cards.length) return;
  
  // Extract unique dates
  const dateMap = new Map();
  cards.forEach(card => {
    const dateStr = card.getAttribute('data-date');
    if (dateStr && !dateMap.has(dateStr)) {
      const date = new Date(dateStr);
      dateMap.set(dateStr, {
        date,
        year: date.getFullYear(),
        month: date.toLocaleString('en', { month: 'short' })
      });
    }
  });
  
  // Sort dates descending
  const sortedEntries = Array.from(dateMap.entries())
    .sort((a, b) => b[1].date - a[1].date);
  
  // Create timeline items
  sortedEntries.forEach(([dateStr, dateInfo]) => {
    const timelineItem = document.createElement('div');
    timelineItem.className = 'timeline-item';
    timelineItem.setAttribute('data-date', dateStr);
    timelineItem.innerHTML = `<span class="timeline-year">${dateInfo.year}</span><span class="timeline-month">${dateInfo.month}</span>`;
    
    timelineItem.addEventListener('click', function() {
      const card = document.querySelector(`.gallery-card[data-date="${dateStr}"]`);
      if (card) {
        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    });
    
    timeline.appendChild(timelineItem);
  });
  
  // Update active item on scroll
  function updateActive() {
    const items = timeline.querySelectorAll('.timeline-item');
    items.forEach(item => item.classList.remove('active'));
    
    for (let card of cards) {
      const rect = card.getBoundingClientRect();
      if (rect.top < window.innerHeight * 0.6 && rect.bottom > window.innerHeight * 0.4) {
        const dateStr = card.getAttribute('data-date');
        const activeItem = timeline.querySelector(`.timeline-item[data-date="${dateStr}"]`);
        if (activeItem) {
          activeItem.classList.add('active');
        }
        break;
      }
    }
  }
  
  window.addEventListener('scroll', updateActive);
  updateActive();
});
</script>
```
